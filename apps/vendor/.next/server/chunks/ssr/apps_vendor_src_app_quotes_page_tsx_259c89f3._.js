module.exports=[36789,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(99711);var d=a.i(15072);a.i(56120);var e=a.i(45346),f=a.i(17731),g=a.i(62917),h=a.i(71360),i=a.i(15409),j=a.i(96221),k=a.i(70106);let l=(0,k.default)("receipt-text",[["path",{d:"M13 16H8",key:"wsln4y"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M4 3a1 1 0 0 1 1-1 1.3 1.3 0 0 1 .7.2l.933.6a1.3 1.3 0 0 0 1.4 0l.934-.6a1.3 1.3 0 0 1 1.4 0l.933.6a1.3 1.3 0 0 0 1.4 0l.933-.6a1.3 1.3 0 0 1 1.4 0l.934.6a1.3 1.3 0 0 0 1.4 0l.933-.6A1.3 1.3 0 0 1 19 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1 1.3 1.3 0 0 1-.7-.2l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.934.6a1.3 1.3 0 0 1-1.4 0l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-1.4 0l-.934-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-.7.2 1 1 0 0 1-1-1z",key:"ycz6yz"}]]);var m=a.i(34157),m=m,n=a.i(33508),o=a.i(210);let p=(0,k.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var q=a.i(23292),r=a.i(38246),s=a.i(50944),t=a.i(24607),u=a.i(16245),v=a.i(4720),w=a.i(63519),x=a.i(92258);let y=(0,k.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);function z(){let{user:a,loading:k}=(0,t.useAuth)(),z=(0,s.useRouter)(),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)("active"),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(""),W=a=>{J(a),L(!0)};(0,c.useEffect)(()=>{k||a?a&&X():z.push("/auth/login")},[a,k,z]);let X=async()=>{try{let a=await d.quoteService.getMyQuotes();B(a)}catch(a){console.error("Failed to fetch quotes",a),q.toast.error("Failed to load quotes.")}finally{D(!1)}},Y=async a=>{J(a),N(!0),R(!0);try{let b=await d.quoteService.getQuoteContact(a.id);P(b)}catch(b){console.error("Failed to fetch contact info",b);let a=b.response?.data?.error||"Failed to fetch contact information.";q.toast.error(a),R(!1)}finally{N(!1)}},Z=async()=>{if(!I)return;let a=I.id;F(a+"-revision");try{await d.quoteService.requestRevision(a,U),q.toast.success("Revision requested successfully!"),T(!1),L(!1),V(""),await X()}catch(a){console.error(a),q.toast.error("Failed to request revision.")}finally{F(null)}},$=async a=>{F(a+"-accept");try{await d.quoteService.acceptQuote(a),q.toast.success("Quote accepted successfully!"),L(!1),await X()}catch(a){console.error(a),q.toast.error("Failed to accept quote.")}finally{F(null)}},_=async a=>{F(a+"-reject");try{await d.quoteService.rejectQuote(a),q.toast.success("Quote rejected."),L(!1),await X()}catch(a){console.error(a),q.toast.error("Failed to reject quote.")}finally{F(null)}};return k||C?(0,b.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,b.jsx)(e.Navbar,{}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),(0,b.jsx)(f.Footer,{})]}):(0,b.jsxs)("div",{className:"flex min-h-screen flex-col bg-slate-50 dark:bg-slate-950",children:[(0,b.jsx)(e.Navbar,{}),(0,b.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8 max-w-6xl",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,b.jsx)(r.default,{href:"/dashboard",children:(0,b.jsx)(o.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"My Quotes"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage quotes you have requested from vendors."})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 mb-6 border-b pb-1",children:[(0,b.jsxs)("button",{onClick:()=>H("active"),className:`pb-2 px-4 transition-colors relative ${"active"===G?"text-primary font-semibold":"text-muted-foreground"}`,children:["Active Quotes","active"===G&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"})]}),(0,b.jsxs)("button",{onClick:()=>H("archived"),className:`pb-2 px-4 transition-colors relative ${"archived"===G?"text-primary font-semibold":"text-muted-foreground"}`,children:["Archived","archived"===G&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"})]})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border shadow-sm overflow-hidden",children:0===A.filter(a=>"active"===G?"archived"!==a.status:"archived"===a.status).length?(0,b.jsxs)("div",{className:"flex min-h-[300px] flex-col items-center justify-center text-center p-8 animate-in fade-in-50",children:[(0,b.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-primary/10",children:(0,b.jsx)(l,{className:"h-6 w-6 text-primary"})}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No Quotes Found"}),(0,b.jsx)("p",{className:"mb-4 mt-2 text-sm text-muted-foreground max-w-sm",children:"active"===G?"You don't have any active quote requests at the moment.":"You don't have any archived or expired quotes."}),"active"===G&&(0,b.jsx)(g.Button,{asChild:!0,children:(0,b.jsx)(r.default,{href:"/vendors",children:"Find Vendors"})})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Vendor"}),(0,b.jsx)(h.TableHead,{children:"Event"}),(0,b.jsx)(h.TableHead,{children:"Requested Budget"}),(0,b.jsx)(h.TableHead,{children:"Created"}),(0,b.jsx)(h.TableHead,{children:"Quoted Price"}),(0,b.jsx)(h.TableHead,{children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:A.filter(a=>"active"===G?"archived"!==a.status:"archived"===a.status).map(a=>{let c=a.vendor_name||a.vendor_id,d=a.event_title||a.event_id;return(0,b.jsxs)(h.TableRow,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>W(a),children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:c}),(0,b.jsx)(h.TableCell,{children:d}),(0,b.jsx)(h.TableCell,{className:"text-sm text-muted-foreground whitespace-nowrap",children:a.budget_range||"-"}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground whitespace-nowrap",children:a.created_at?new Date(a.created_at).toLocaleDateString():"-"}),(0,b.jsx)(h.TableCell,{className:"font-semibold",children:a.quoted_price?`₹${a.quoted_price}`:"Pending response"}),(0,b.jsxs)(h.TableCell,{children:[(0,b.jsx)(i.Badge,{variant:"accepted"===a.status?"default":"rejected"===a.status?"destructive":"responded"===a.status?"secondary":("archived"===a.status||a.status,"outline"),className:"capitalize",children:"archived"===a.status?"Contact Expired":a.status.replace("_"," ")}),"accepted"===a.status&&a.contact_expires_at&&(0,b.jsxs)("p",{className:"text-[10px] text-orange-600 mt-1 font-medium",children:["Access expires: ",new Date(a.contact_expires_at).toLocaleDateString()]})]}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:["accepted"===a.status&&(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",className:"h-8 shadow-none text-green-600 hover:text-green-700 hover:bg-green-50",onClick:b=>{b.stopPropagation(),Y(a)},children:[(0,b.jsx)(w.Phone,{className:"h-4 w-4 mr-2"}),"Contact"]}),(0,b.jsxs)(g.Button,{size:"sm",variant:"ghost",className:"h-8 shadow-none",onClick:b=>{b.stopPropagation(),W(a)},children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2"}),"View"]})]})})]},a.id)})})]})})}),(0,b.jsx)(u.Dialog,{open:K,onOpenChange:L,children:(0,b.jsxs)(u.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:"Quote Details"}),(0,b.jsx)(u.DialogDescription,{children:"Review the quote response from the vendor."})]}),I&&(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Vendor"}),(0,b.jsx)("p",{className:"font-medium",children:I.vendor_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Event"}),(0,b.jsx)("p",{className:"font-medium",children:I.event_title})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Your Message"}),(0,b.jsx)("div",{className:"bg-muted p-3 flex rounded-md text-sm whitespace-pre-wrap",children:I.message||"No message provided."})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("h4",{className:"font-semibold text-base",children:"Vendor Response"}),(0,b.jsx)(i.Badge,{variant:"accepted"===I.status?"default":"rejected"===I.status?"destructive":"responded"===I.status?"secondary":("archived"===I.status||I.status,"outline"),className:"capitalize",children:"archived"===I.status?"Contact Expired":I.status.replace("_"," ")})]}),"accepted"===I.status&&I.contact_expires_at&&(0,b.jsxs)("div",{className:"bg-orange-50 border border-orange-100 p-2 rounded-md mb-4 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-600 animate-pulse"}),(0,b.jsxs)("p",{className:"text-[11px] text-orange-700 font-medium",children:["Contact access will expire on ",new Date(I.contact_expires_at).toLocaleDateString()," (",new Date(I.contact_expires_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),")"]})]}),"archived"===I.status&&(0,b.jsxs)("div",{className:"bg-slate-50 border border-slate-200 p-2 rounded-md mb-4 flex items-center gap-2",children:[(0,b.jsx)(n.X,{className:"h-3 w-3 text-slate-500"}),(0,b.jsx)("p",{className:"text-[11px] text-slate-600 font-medium",children:"This quote has been archived. Contact access is no longer available."})]}),"pending"===I.status?(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic mt-2",children:"The vendor has not responded yet."}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Requested Budget"}),(0,b.jsx)("p",{className:"font-semibold",children:I.budget_range||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Quoted Price"}),(0,b.jsx)("p",{className:"font-semibold",children:I.quoted_price?`₹${I.quoted_price}`:"Pending"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Message from Vendor"}),(0,b.jsx)("div",{className:"bg-primary/5 border border-primary/20 p-3 rounded-md text-sm whitespace-pre-wrap",children:I.vendor_response||"No response details."})]}),I.attachment_url&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Attachment"}),(0,b.jsxs)("a",{href:I.attachment_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 border rounded-md hover:bg-muted/50 transition-colors group",children:[(0,b.jsx)(v.FileText,{className:"h-5 w-5 text-primary mr-2"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"View Quote Attachment"})]})]}),I.responded_at&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Responded on ",new Date(I.responded_at).toLocaleString()]})]})]}),(I.special_requirements||I.deadline)&&(0,b.jsxs)("div",{className:"pt-4 border-t space-y-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Request Details"}),I.special_requirements&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Special Requirements"}),(0,b.jsx)("p",{className:"text-sm",children:I.special_requirements})]}),I.deadline&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Required By"}),(0,b.jsx)("p",{className:"text-sm",children:new Date(I.deadline).toLocaleDateString()})]})]})]}),I?.status==="responded"&&(0,b.jsxs)(u.DialogFooter,{className:"flex flex-col sm:flex-row gap-2",children:[(0,b.jsxs)(g.Button,{type:"button",variant:"outline",disabled:!!E,onClick:()=>T(!0),className:"flex-1",children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2"}),"Request Revision"]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,b.jsxs)(g.Button,{type:"button",variant:"outline",disabled:!!E,onClick:()=>_(I.id),className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:[E===I.id+"-reject"?(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,b.jsx)(n.X,{className:"h-4 w-4 mr-2"}),"Reject"]}),(0,b.jsxs)(g.Button,{type:"button",disabled:!!E,onClick:()=>$(I.id),className:"flex-1",children:[E===I.id+"-accept"?(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,b.jsx)(m.default,{className:"h-4 w-4 mr-2"}),"Accept"]})]})]}),I?.status==="accepted"&&(0,b.jsx)(u.DialogFooter,{children:(0,b.jsxs)(g.Button,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>Y(I),children:[(0,b.jsx)(w.Phone,{className:"h-4 w-4 mr-2"}),"Contact Vendor"]})})]})}),(0,b.jsx)(u.Dialog,{open:Q,onOpenChange:R,children:(0,b.jsxs)(u.DialogContent,{className:"sm:max-w-[400px]",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:"Vendor Contact Information"}),(0,b.jsxs)(u.DialogDescription,{children:["Secure communication unlocked for ",I?.vendor_name]}),I?.contact_expires_at&&(0,b.jsxs)("div",{className:"mt-2 text-[10px] font-semibold text-orange-600 uppercase tracking-tight",children:["Expires on ",new Date(I.contact_expires_at).toLocaleString()]})]}),M?(0,b.jsx)("div",{className:"py-12 flex justify-center",children:(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):O?(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center p-3 border rounded-lg bg-green-50/50 border-green-100",children:[(0,b.jsx)(y,{className:"h-5 w-5 text-green-600 mr-3"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase font-semibold",children:"WhatsApp"}),(0,b.jsx)("a",{href:O.vendor.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium hover:underline text-green-700",children:"Click to chat on WhatsApp"})]})]}),(0,b.jsxs)("div",{className:"flex items-center p-3 border rounded-lg",children:[(0,b.jsx)(w.Phone,{className:"h-5 w-5 text-primary mr-3"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase font-semibold",children:"Phone Number"}),(0,b.jsx)("a",{href:`tel:${O.vendor.phone}`,className:"text-sm font-medium hover:underline",children:O.vendor.phone||"Not provided"})]})]}),(0,b.jsxs)("div",{className:"flex items-center p-3 border rounded-lg",children:[(0,b.jsx)(x.Mail,{className:"h-5 w-5 text-primary mr-3"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase font-semibold",children:"Email Address"}),(0,b.jsx)("a",{href:`mailto:${O.vendor.email}`,className:"text-sm font-medium hover:underline",children:O.vendor.email||"Not provided"})]})]})]}),(0,b.jsx)("div",{className:"p-3 bg-blue-50/50 border border-blue-100 rounded-lg",children:(0,b.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed",children:[(0,b.jsx)("strong",{children:"Pro-tip:"})," Mention your Event Name (",I?.event_title,") when contacting the vendor to help them identify your request."]})})]}):(0,b.jsx)("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Failed to load contact information."}),(0,b.jsx)(u.DialogFooter,{children:(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>R(!1),className:"w-full",children:"Close"})})]})}),(0,b.jsx)(u.Dialog,{open:S,onOpenChange:T,children:(0,b.jsxs)(u.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:"Request Revision"}),(0,b.jsx)(u.DialogDescription,{children:"Tell the vendor what you'd like them to adjust (e.g., lower price, change dates, or add services)."})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)("textarea",{className:"w-full min-h-[120px] p-3 rounded-md border bg-slate-50 dark:bg-slate-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Example: Could you provide a breakdown for the equipment costs? Also, is there any flexibility on the setup time?",value:U,onChange:a=>V(a.target.value)})}),(0,b.jsxs)(u.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>T(!1),disabled:!!E,children:"Cancel"}),(0,b.jsxs)(g.Button,{onClick:Z,disabled:!!E||!U.trim(),children:[E?.includes("revision")&&(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Request"]})]})]})})]}),(0,b.jsx)(f.Footer,{})]})}a.s(["default",()=>z],36789)}];

//# sourceMappingURL=apps_vendor_src_app_quotes_page_tsx_259c89f3._.js.map