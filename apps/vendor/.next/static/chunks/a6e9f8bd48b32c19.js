(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62348,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566);e.i(41644);var a=e.i(27421),i=e.i(22832),l=e.i(2795);e.i(16233);var n=e.i(18951),o=e.i(45959),d=e.i(50610),c=e.i(74650),u=e.i(6556),m=e.i(19696),x=e.i(58604),p=e.i(35131),h=e.i(31278),f=e.i(71689),g=e.i(23945),j=e.i(75254);let v=(0,j.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var y=e.i(43432),b=e.i(63488),N=e.i(37727),w=e.i(46696),C=e.i(78598),_=e.i(932),k=e.i(69074);let S=(0,j.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var M=e.i(27100),F=e.i(57688);e.s([],42959),e.i(42959);var D=e.i(65566);let q=(0,r.createContext)(null);var R=e.i(46932),B=e.i(47414),A=e.i(706),E=e.i(33887);let L=(0,r.forwardRef)(function({children:e,as:s="ul",axis:a="y",onReorder:i,values:l,...n},o){let d=(0,B.useConstant)(()=>R.motion[s]),c=[],u=(0,r.useRef)(!1),m=(0,r.useRef)(null);(0,D.invariant)(!!l,"Reorder.Group must be provided a values prop","reorder-values"),(0,r.useEffect)(()=>{u.current=!1});let x={overflowAnchor:"none",...n.style};return(0,t.jsx)(d,{...n,style:x,ref:e=>{m.current=e,"function"==typeof o?o(e):o&&(o.current=e)},ignoreStrict:!0,children:(0,t.jsx)(q.Provider,{value:{axis:a,groupRef:m,registerItem:(e,t)=>{let r=c.findIndex(t=>e===t.value);-1!==r?c[r].layout=t[a]:c.push({value:e,layout:t[a]}),c.sort(T)},updateOrder:(e,t,r)=>{if(u.current)return;let s=function(e,t,r,s){if(!s)return e;let a=e.findIndex(e=>e.value===t);if(-1===a)return e;let i=s>0?1:-1,l=e[a+i];if(!l)return e;let n=e[a],o=l.layout,d=(0,A.mixNumber)(o.min,o.max,.5);return 1===i&&n.layout.max+r>d||-1===i&&n.layout.min+r<d?(0,E.moveItem)(e,a,a+i):e}(c,e,t,r);c!==s&&(u.current=!0,i(s.map(P).filter(e=>-1!==l.indexOf(e))))}},children:e})})});function P(e){return e.value}function T(e,t){return e.layout.min-t.layout.min}var z=e.i(83411),I=e.i(86427),V=e.i(37806);function U(e){let t=(0,B.useConstant)(()=>(0,I.motionValue)(e)),{isStatic:s}=(0,r.useContext)(V.MotionConfigContext);if(s){let[,s]=(0,r.useState)(e);(0,r.useEffect)(()=>t.on("change",s),[])}return t}var $=e.i(44230),H=e.i(87022),O=e.i(74008);function Q(e,t){let r=U(t()),s=()=>r.set(t());return s(),(0,O.useIsomorphicLayoutEffect)(()=>{let t=()=>H.frame.preRender(s,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,H.cancelFrame)(s)}}),r}function Y(e,t){let r=(0,B.useConstant)(()=>[]);return Q(e,()=>{r.length=0;let s=e.length;for(let t=0;t<s;t++)r[t]=e[t].get();return t(r)})}let G=new Set(["auto","scroll"]),W=new WeakMap,X=new WeakMap,K=null;function J(e,t){let r=e?.parentElement;for(;r;){if(function(e,t){let r=getComputedStyle(e),s="x"===t?r.overflowX:r.overflowY,a=e===document.body||e===document.documentElement;return G.has(s)||a}(r,t))return r;r=r.parentElement}return null}function Z(e,t=0){return(0,z.isMotionValue)(e)?e:U(t)}let ee=(0,r.forwardRef)(function({children:e,style:s={},value:a,as:i="li",onDrag:l,onDragEnd:n,layout:o=!0,...d},c){let u=(0,B.useConstant)(()=>R.motion[i]),m=(0,r.useContext)(q),x={x:Z(s.x),y:Z(s.y)},p=function e(t,r,s,a){if("function"==typeof t){let e;return I.collectMotionValues.current=[],t(),e=Q(I.collectMotionValues.current,t),I.collectMotionValues.current=void 0,e}if(void 0!==s&&!Array.isArray(s)&&"function"!=typeof r){var i=t,l=r,n=s,o=a;let d=(0,B.useConstant)(()=>Object.keys(n)),c=(0,B.useConstant)(()=>({}));for(let t of d)c[t]=e(i,l,n[t],o);return c}let d="function"==typeof r?r:function(...e){let t=!Array.isArray(e[0]),r=t?0:-1,s=e[0+r],a=e[1+r],i=e[2+r],l=e[3+r],n=(0,$.interpolate)(a,i,l);return t?n(s):n}(r,s,a),c=Array.isArray(t)?Y(t,d):Y([t],([e])=>d(e)),u=Array.isArray(t)?void 0:t.accelerate;return u&&!u.isTransformed&&"function"!=typeof r&&Array.isArray(s)&&a?.clamp!==!1&&(c.accelerate={...u,times:r,keyframes:s,isTransformed:!0,...a?.ease?{ease:a.ease}:{}}),c}([x.x,x.y],([e,t])=>e||t?1:"unset");(0,D.invariant)(!!m,"Reorder.Item must be a child of Reorder.Group","reorder-item-child");let{axis:h,registerItem:f,updateOrder:g,groupRef:j}=m;return(0,t.jsx)(u,{drag:h,...d,dragSnapToOrigin:!0,style:{...s,x:x.x,y:x.y,zIndex:p},layout:o,onDrag:(e,t)=>{let{velocity:r,point:s}=t;g(a,x[h].get(),r[h]),function(e,t,r,s){if(!e)return;K=e;let a=J(e,r);if(!a)return;let{amount:i,edge:l}=function(e,t,r){let s=t.getBoundingClientRect(),a="x"===r?Math.max(0,s.left):Math.max(0,s.top),i="x"===r?Math.min(window.innerWidth,s.right):Math.min(window.innerHeight,s.bottom),l=e-a,n=i-e;if(l<50){let e=1-l/50;return{amount:-25*e*e,edge:"start"}}if(n<50){let e=1-n/50;return{amount:25*e*e,edge:"end"}}return{amount:0,edge:null}}(t-("x"===r?window.scrollX:window.scrollY),a,r);if(null===l){X.delete(a),W.delete(a);return}let n=X.get(a),o=a===document.body||a===document.documentElement;if(n!==l){if(!("start"===l&&s<0||"end"===l&&s>0))return;X.set(a,l);let e="x"===r?a.scrollWidth-(o?window.innerWidth:a.clientWidth):a.scrollHeight-(o?window.innerHeight:a.clientHeight);W.set(a,e)}if(i>0){let e=W.get(a);if(("x"===r?o?window.scrollX:a.scrollLeft:o?window.scrollY:a.scrollTop)>=e)return}"x"===r?o?window.scrollBy({left:i}):a.scrollLeft+=i:o?window.scrollBy({top:i}):a.scrollTop+=i}(j.current,s[h],h,r[h]),l&&l(e,t)},onDragEnd:(e,t)=>{if(K){let e=J(K,"y");e&&(X.delete(e),W.delete(e));let t=J(K,"x");t&&t!==e&&(X.delete(t),W.delete(t)),K=null}n&&n(e,t)},onLayoutMeasure:e=>{f(a,e)},ref:c,ignoreStrict:!0,children:e})});e.s(["Group",()=>L,"Item",()=>ee],40025);var et=e.i(40025),et=et;class er{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,t)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}let es=()=>new er;function ea({images:e=[],onChange:s,maxImages:a=25}){let[i,l]=(0,r.useState)(!1),n=async t=>{let r=t.target.files;if(!r||0===r.length)return;if(e.length+r.length>a)return void w.toast.error(`You can only upload up to ${a} images`);l(!0);let i=[...e];try{for(let e=0;e<r.length;e++){let t=r[e];if(t.size>5242880){w.toast.error(`File ${t.name} is too large (>5MB)`);continue}let s=await M.mediaService.uploadMedia(t);i.push(s)}s(i),w.toast.success("Gallery updated successfully")}catch(t){console.error("Gallery upload failed",t);let e=t.response?.data?.error||"Failed to upload some images";w.toast.error(e)}finally{l(!1),t.target.value=""}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)(et.Group,{axis:"x",values:e,onReorder:s,className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide snap-x",children:[e.map((r,a)=>(0,t.jsx)(ei,{url:r,index:a,onRemove:()=>{let t;(t=[...e]).splice(a,1),s(t)}},r)),e.length<a&&(0,t.jsxs)("label",{className:"flex-shrink-0 aspect-square w-32 md:w-36 border-2 border-dashed border-primary/20 hover:border-primary/40 rounded-xl flex flex-col items-center justify-center cursor-pointer bg-primary/5 hover:bg-primary/10 transition-all group snap-start",children:[i?(0,t.jsx)(h.Loader2,{className:"h-6 w-6 animate-spin text-primary"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Upload,{className:"h-5 w-5 text-primary mb-1 group-hover:scale-110 transition-transform"}),(0,t.jsx)("span",{className:"text-[10px] text-primary font-bold uppercase tracking-wider text-center",children:"Add More"})]}),(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:n,disabled:i})]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,t.jsxs)("p",{className:"text-[10px] text-muted-foreground flex items-center gap-1.5 font-bold uppercase tracking-tight",children:[(0,t.jsx)(S,{className:"h-3 w-3 opacity-50"}),"Drag handle horizontally to reorder. First image is the cover."]}),(0,t.jsxs)("div",{className:"text-[10px] font-black text-muted-foreground/40 bg-muted px-2 py-0.5 rounded-full",children:[e.length," / ",a]})]})]})}function ei(e){let r,s,a,i,l,n,o,d,c,u,m,x,h=(0,_.c)(30),{url:f,index:g,onRemove:j}=e,v=(0,B.useConstant)(es),y=`relative flex-shrink-0 aspect-square w-32 md:w-36 group rounded-xl overflow-hidden border bg-card transition-shadow hover:shadow-md snap-start ${0===g?"ring-2 ring-primary ring-offset-2":"border-muted"}`,b=`Gallery ${g+1}`;return h[0]!==b||h[1]!==f?(r=(0,t.jsx)(F.default,{src:f,alt:b,fill:!0,className:"object-cover pointer-events-none"}),h[0]=b,h[1]=f,h[2]=r):r=h[2],h[3]!==g?(s=0===g&&(0,t.jsx)("div",{className:"absolute top-2 left-2 z-10 pointer-events-none transition-opacity group-hover:opacity-0",children:(0,t.jsx)(p.Badge,{className:"bg-primary/90 backdrop-blur-sm text-[10px] px-1.5 py-0 h-5 border-none shadow-sm font-bold",variant:"default",children:"COVER"})}),h[3]=g,h[4]=s):s=h[4],h[5]!==g?(a=0===g?(0,t.jsx)(p.Badge,{className:"bg-primary text-[10px] px-1.5 py-0 h-5 border-none font-bold",variant:"default",children:"COVER"}):(0,t.jsx)("div",{}),h[5]=g,h[6]=a):a=h[6],h[7]!==j?(i=e=>{e.stopPropagation(),j()},h[7]=j,h[8]=i):i=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(N.X,{className:"h-4 w-4"}),h[9]=l):l=h[9],h[10]!==i?(n=(0,t.jsx)("button",{onClick:i,className:"p-1.5 bg-white/20 hover:bg-red-500 rounded-full transition-colors text-white",type:"button",children:l}),h[10]=i,h[11]=n):n=h[11],h[12]!==a||h[13]!==n?(o=(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[a,n]}),h[12]=a,h[13]=n,h[14]=o):o=h[14],h[15]!==v?(d=e=>v.start(e),h[15]=v,h[16]=d):d=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("div",{className:"bg-white p-2 rounded-lg text-primary shadow-lg transform active:scale-110 transition-transform",children:(0,t.jsx)(S,{className:"h-5 w-5"})}),h[17]=c):c=h[17],h[18]!==d?(u=(0,t.jsx)("div",{className:"flex justify-center pb-2 cursor-grab active:cursor-grabbing",onPointerDown:d,children:c}),h[18]=d,h[19]=u):u=h[19],h[20]!==u||h[21]!==o?(m=(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-2",children:[o,u]}),h[20]=u,h[21]=o,h[22]=m):m=h[22],h[23]!==v||h[24]!==y||h[25]!==m||h[26]!==r||h[27]!==s||h[28]!==f?(x=(0,t.jsxs)(et.Item,{value:f,dragListener:!1,dragControls:v,className:y,children:[r,s,m]}),h[23]=v,h[24]=y,h[25]=m,h[26]=r,h[27]=s,h[28]=f,h[29]=x):x=h[29],x}var el=e.i(78583);let en=(0,j.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),eo=(0,j.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function ed({files:e=[],onChange:s,maxFiles:a=20}){let[i,l]=(0,r.useState)(!1),n=async t=>{let r=t.target.files;if(!r||0===r.length)return;if(e.length+r.length>a)return void w.toast.error(`You can only upload up to ${a} files`);l(!0);let i=[...e];try{for(let e=0;e<r.length;e++){let t=r[e];if(t.size>5242880){w.toast.error(`File ${t.name} is too large (>5MB)`);continue}if("application/pdf"!==t.type){w.toast.error(`File ${t.name} is not a PDF`);continue}let s=await M.mediaService.uploadMedia(t);i.push({name:t.name,url:s,size:(t.size/1024/1024).toFixed(2)+" MB"})}s(i),w.toast.success("Portfolio updated successfully")}catch(t){console.error("Portfolio upload failed",t);let e=t.response?.data?.error||"Failed to upload some files";w.toast.error(e)}finally{l(!1),t.target.value=""}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"grid gap-3",children:e.map((r,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-card hover:bg-accent/50 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded text-red-600 dark:text-red-400",children:(0,t.jsx)(el.FileText,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-sm truncate hover:underline block",children:r.name}),r.size&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:r.size})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-muted-foreground hover:text-foreground rounded-full hover:bg-muted",title:"Download/View",children:(0,t.jsx)(en,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>{let t;(t=[...e]).splice(a,1),s(t)},className:"p-2 text-muted-foreground hover:text-red-600 rounded-full hover:bg-muted",type:"button",title:"Delete",children:(0,t.jsx)(eo,{className:"h-4 w-4"})})]})]},a))}),e.length<a&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("label",{className:"inline-flex",children:[(0,t.jsxs)(d.Button,{variant:"outline",disabled:i,onClick:()=>document.getElementById("portfolio-upload")?.click(),type:"button",className:"gap-2",children:[i?(0,t.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(k.Upload,{className:"h-4 w-4"}),"Upload PDF"]}),(0,t.jsx)("input",{id:"portfolio-upload",type:"file",accept:".pdf",multiple:!0,className:"hidden",onChange:n,disabled:i})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Max ",a," files, 5MB each."]})]})]})}var ec=e.i(22016),eu=e.i(54803);function em(){let e=(0,s.useRouter)(),[j,_]=(0,r.useState)(null),[k,S]=(0,r.useState)(null),[M,F]=(0,r.useState)(!0),[D,q]=(0,r.useState)(!1),[R,B]=(0,r.useState)("profile"),[A,E]=(0,r.useState)([]),[L,P]=(0,r.useState)(null),[T,z]=(0,r.useState)({}),[I,V]=(0,r.useState)("active"),[U,$]=(0,r.useState)(null),[H,O]=(0,r.useState)(null),[Q,Y]=(0,r.useState)(!1),[G,W]=(0,r.useState)(!1),[X,K]=(0,r.useState)({business_name:"",category:"",city:"",bio:"",whatsapp_link:"",portfolio_image_url:"",gallery_images:[],portfolio_files:[]});(0,r.useEffect)(()=>{(async()=>{try{let t=await a.userService.getMe();if(_(t),!t.vendor_profile_exists)return void e.push("/vendor/onboard");try{let e=await i.vendorService.getMyProfile();S(e),K({business_name:e.business_name||"",category:e.category||"",city:e.city||"",bio:e.bio||"",whatsapp_link:e.whatsapp_link||"",portfolio_image_url:e.portfolio_image_url||"",gallery_images:e.gallery_images||[],portfolio_files:e.portfolio_files||[]});try{let e=await l.quoteService.getQuoteRequests();E(e)}catch(e){console.error("Failed to fetch quote requests",e)}}catch(t){if(console.error("Failed to fetch vendor profile",t),t.response&&404===t.response.status){w.toast.error("Vendor profile not found. Please complete onboarding."),e.push("/vendor/onboard");return}w.toast.error("Failed to load vendor profile")}}catch(t){console.error(t),e.push("/auth/login")}finally{F(!1)}})()},[e]);let J=async e=>{e.preventDefault(),q(!0);try{await i.vendorService.updateProfile(X),w.toast.success("Vendor profile updated successfully");let e=await i.vendorService.getMyProfile();S(e)}catch(t){console.error("Failed to update profile",t);let e=t.response?.data?.error||"Failed to update profile.";w.toast.error(e)}finally{q(!1)}},Z=async e=>{let t=T[e];if(t&&t.price){P(e);try{await l.quoteService.respondToQuote(e,Number(t.price),t.message,t.attachment),w.toast.success("Quote response sent!");let r=await l.quoteService.getQuoteRequests();E(r)}catch(e){console.error(e),w.toast.error("Failed to send response.")}finally{P(null)}}},ee=async e=>{$(e),W(!0),Y(!0);try{let t=await l.quoteService.getQuoteContact(e.id);O(t)}catch(t){console.error("Failed to fetch contact info",t);let e=t.response?.data?.error||"Failed to fetch contact information.";w.toast.error(e),Y(!1)}finally{W(!1)}};return M?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(n.Navbar,{}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),(0,t.jsx)(o.Footer,{})]}):k?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col bg-slate-50 dark:bg-slate-950",children:[(0,t.jsx)(n.Navbar,{}),(0,t.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8 max-w-5xl",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,t.jsx)(ec.default,{href:"/dashboard",children:(0,t.jsx)(f.ArrowLeft,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Vendor Dashboard"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your business profile, gallery, and portfolio."})]}),(0,t.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",asChild:!0,children:(0,t.jsxs)(ec.default,{href:`/vendors/${k.slug}`,target:"_blank",children:[(0,t.jsx)(v,{className:"mr-2 h-4 w-4"}),"View Public Profile"]})}),(0,t.jsxs)(d.Button,{onClick:J,disabled:D,children:[D&&(0,t.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]}),(0,t.jsxs)("div",{className:"mb-8 flex items-center gap-6 border-b",children:[(0,t.jsx)("button",{onClick:()=>B("profile"),className:`pb-3 border-b-2 font-medium text-sm transition-colors ${"profile"===R?"border-primary text-foreground":"border-transparent text-muted-foreground hover:text-foreground"}`,children:"Business Profile"}),(0,t.jsxs)("button",{onClick:()=>B("quotes"),className:`pb-3 border-b-2 font-medium text-sm transition-colors ${"quotes"===R?"border-primary text-foreground":"border-transparent text-muted-foreground hover:text-foreground"}`,children:["Quote Requests",A.filter(e=>"pending"===e.status||"revision_requested"===e.status).length>0&&(0,t.jsx)("span",{className:"ml-2 bg-primary text-primary-foreground text-[10px] py-0.5 px-2 rounded-full",children:A.filter(e=>"pending"===e.status||"revision_requested"===e.status).length})]})]}),"profile"===R?(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-[1fr_300px] animate-in fade-in-50",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{children:"Media Gallery"}),(0,t.jsx)(c.CardDescription,{children:"Showcase your work with a gallery of images (max 25)."})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(ea,{images:X.gallery_images,onChange:e=>K({...X,gallery_images:e}),maxImages:25})})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{children:"Portfolio & Documents"}),(0,t.jsx)(c.CardDescription,{children:"Upload PDF portfolios, rate cards, or brochures (max 20)."})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(ed,{files:X.portfolio_files,onChange:e=>K({...X,portfolio_files:e}),maxFiles:20})})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{children:"Business Details"}),(0,t.jsx)(c.CardDescription,{children:"Update your basic business information."})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"business_name",children:"Business Name"}),(0,t.jsx)(u.Input,{id:"business_name",value:X.business_name,onChange:e=>K({...X,business_name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"category",children:"Category"}),(0,t.jsx)(u.Input,{id:"category",value:X.category,onChange:e=>K({...X,category:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"city",children:"City"}),(0,t.jsx)(u.Input,{id:"city",value:X.city,onChange:e=>K({...X,city:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"whatsapp",children:"WhatsApp Link"}),(0,t.jsx)(u.Input,{id:"whatsapp",value:X.whatsapp_link,onChange:e=>K({...X,whatsapp_link:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"bio",children:"Bio"}),(0,t.jsx)(m.Textarea,{id:"bio",value:X.bio,onChange:e=>K({...X,bio:e.target.value}),rows:4})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{children:"Primary Image"}),(0,t.jsx)(c.CardDescription,{children:"This is the main image shown on your profile card."})]}),(0,t.jsxs)(c.CardContent,{className:"flex flex-col items-center",children:[X.portfolio_image_url||j?.profile_image_url?(0,t.jsx)(C.FileUpload,{onUploaded:e=>K({...X,portfolio_image_url:e}),defaultUrl:X.portfolio_image_url||j?.profile_image_url,label:"Upload Brand Image"}):(0,t.jsxs)("div",{className:"space-y-4 flex flex-col items-center w-full",children:[(0,t.jsx)("div",{className:"h-32 w-32 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-3xl font-bold text-muted-foreground border-2 border-dashed border-muted-foreground/20",children:(j?.full_name||j?.username||"V").charAt(0).toUpperCase()}),(0,t.jsx)(C.FileUpload,{onUploaded:e=>K({...X,portfolio_image_url:e}),label:"Upload Brand Image"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-4 text-center",children:"If not set, we'll use your personal profile picture or initials."})]})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{children:"Satus"})}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`h-2.5 w-2.5 rounded-full ${k.verified?"bg-green-500":"bg-yellow-500"}`}),(0,t.jsx)("span",{className:"font-medium capitalize",children:k.verified?"Verified":"Pending Verification"})]}),!k.verified&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Your profile is under review by our team."})]})]})]})]}):(0,t.jsxs)("div",{className:"space-y-4 animate-in fade-in-50",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4 border-b pb-1",children:[(0,t.jsxs)("button",{onClick:()=>V("active"),className:`pb-2 px-4 transition-colors relative text-xs ${"active"===I?"text-primary font-semibold":"text-muted-foreground"}`,children:["Active Requests","active"===I&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"})]}),(0,t.jsxs)("button",{onClick:()=>V("archived"),className:`pb-2 px-4 transition-colors relative text-xs ${"archived"===I?"text-primary font-semibold":"text-muted-foreground"}`,children:["Archived / Expired","archived"===I&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"})]})]}),0===A.filter(e=>"active"===I?"archived"!==e.status:"archived"===e.status).length?(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"flex flex-col items-center justify-center p-12 text-center text-muted-foreground",children:[(0,t.jsx)(g.Store,{className:"h-8 w-8 mb-4 opacity-50"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-1",children:"No Quote Requests Yet"}),(0,t.jsx)("p",{children:"When users request pricing for events, they will appear here."})]})}):A.filter(e=>"active"===I?"archived"!==e.status:"archived"===e.status).map(e=>(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.CardTitle,{children:e.event_title||e.event_id}),(0,t.jsxs)(c.CardDescription,{children:["Requested by: ",e.organizer_name," • ",e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown Date"]})]}),(0,t.jsx)(p.Badge,{variant:"pending"===e.status?"outline":"accepted"===e.status?"default":"responded"===e.status?"secondary":"archived"===e.status?"outline":"revision_requested"===e.status?"destructive":"secondary",className:"capitalize",children:"archived"===e.status?"Contact Expired":e.status.replace("_"," ")})]})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4",children:[e.message&&(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-md text-sm",children:[(0,t.jsx)("p",{className:"font-semibold mb-1 text-muted-foreground",children:"Message from Organizer:"}),(0,t.jsx)("p",{children:e.message})]}),e.revision_message&&(0,t.jsxs)("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-md text-sm",children:[(0,t.jsx)("p",{className:"font-semibold mb-1 text-orange-700 font-bold uppercase tracking-wider text-[10px]",children:"Revision Feedback:"}),(0,t.jsx)("p",{className:"text-orange-900",children:e.revision_message})]}),e.budget_range&&(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-md text-sm",children:[(0,t.jsx)("p",{className:"font-semibold mb-1 text-muted-foreground",children:"Budget Range:"}),(0,t.jsx)("p",{children:e.budget_range})]}),e.special_requirements&&(0,t.jsxs)("div",{className:"bg-primary/5 border border-primary/20 p-4 rounded-md text-sm",children:[(0,t.jsx)("p",{className:"font-semibold mb-1 text-primary",children:"Special Requirements:"}),(0,t.jsx)("p",{children:e.special_requirements})]}),e.deadline&&(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-md text-sm flex justify-between items-center",children:[(0,t.jsx)("p",{className:"font-semibold text-muted-foreground",children:"Response Deadline:"}),(0,t.jsx)("p",{className:"font-medium text-red-600",children:new Date(e.deadline).toLocaleDateString()})]}),("pending"===e.status||"revision_requested"===e.status)&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4 mt-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:"Send Response"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Your Quoted Price (₹)"}),(0,t.jsx)(u.Input,{type:"number",placeholder:"e.g. 50000",value:T[e.id]?.price||"",onChange:t=>z({...T,[e.id]:{...T[e.id],price:t.target.value}})})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Response Message (Optional)"}),(0,t.jsx)(m.Textarea,{placeholder:"Explain your pricing or offer details...",value:T[e.id]?.message||"",onChange:t=>z({...T,[e.id]:{...T[e.id],message:t.target.value}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Attachment (Optional - PDF or Image)"}),(0,t.jsx)(C.FileUpload,{onUploaded:t=>z({...T,[e.id]:{...T[e.id],attachment:t}}),label:"Upload Quote/Rate Card",accept:"image/*,application/pdf"}),T[e.id]?.attachment&&(0,t.jsx)("p",{className:"text-xs text-green-600",children:"File uploaded successfully."})]}),(0,t.jsxs)(d.Button,{onClick:()=>Z(e.id),disabled:!T[e.id]?.price||L===e.id,className:"w-full md:w-auto",children:[L===e.id&&(0,t.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"revision_requested"===e.status?"Send Revised Quote":"Send Quote Response"]})]}),"accepted"===e.status&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,t.jsx)("p",{className:"font-bold text-green-800",children:"Quote Accepted!"})]}),e.contact_expires_at&&(0,t.jsxs)("p",{className:"text-[10px] text-orange-600 font-semibold animate-pulse",children:["ACCESS EXPIRES: ",new Date(e.contact_expires_at).toLocaleDateString()]})]}),(0,t.jsx)("p",{className:"text-sm text-green-700 mb-4",children:"The organizer has accepted your quote. You can now contact them directly."}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",className:"bg-white",onClick:()=>ee(e),children:[(0,t.jsx)(v,{className:"mr-2 h-4 w-4"}),"View Organizer Contact"]})})]}),"archived"===e.status&&(0,t.jsxs)("div",{className:"bg-slate-50 border border-slate-200 p-4 rounded-md mt-4 flex items-center gap-3",children:[(0,t.jsx)(N.X,{className:"h-5 w-5 text-slate-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-slate-700",children:"Contact Access Expired"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"The 15-day contact window has closed. This quote is now archived."})]})]}),"pending"!==e.status&&"revision_requested"!==e.status&&e.quoted_price&&(0,t.jsxs)("div",{className:"bg-primary/5 p-4 rounded-md mt-4 border border-primary/10",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"Your response:"}),(0,t.jsxs)("p",{className:"font-medium",children:["Quote: ₹",e.quoted_price]}),e.vendor_response&&(0,t.jsx)("p",{className:"text-sm mt-2 text-muted-foreground",children:e.vendor_response}),e.attachment_url&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)("a",{href:e.attachment_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1",children:[(0,t.jsx)(v,{className:"h-3 w-3"})," View Attachment"]})})]})]})]},e.id))]})]}),(0,t.jsx)(eu.Dialog,{open:Q,onOpenChange:Y,children:(0,t.jsxs)(eu.DialogContent,{className:"sm:max-w-[400px]",children:[(0,t.jsxs)(eu.DialogHeader,{children:[(0,t.jsx)(eu.DialogTitle,{children:"Organizer Contact Information"}),(0,t.jsxs)(eu.DialogDescription,{children:["Direct communication unlocked with ",H?.organizer.name," for ",U?.event_title]}),U?.contact_expires_at&&(0,t.jsxs)("div",{className:"mt-2 text-[10px] font-semibold text-orange-600 uppercase tracking-tight",children:["Access ends on ",new Date(U.contact_expires_at).toLocaleString()]})]}),G?(0,t.jsx)("div",{className:"py-12 flex justify-center",children:(0,t.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):H?(0,t.jsx)("div",{className:"space-y-6 py-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center p-3 border rounded-lg",children:[(0,t.jsx)(y.Phone,{className:"h-5 w-5 text-primary mr-3"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground uppercase font-semibold",children:"Phone Number"}),(0,t.jsx)("a",{href:`tel:${H.organizer.phone}`,className:"text-sm font-medium hover:underline",children:H.organizer.phone||"Not provided"})]})]}),(0,t.jsxs)("div",{className:"flex items-center p-3 border rounded-lg",children:[(0,t.jsx)(b.Mail,{className:"h-5 w-5 text-primary mr-3"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground uppercase font-semibold",children:"Email Address"}),(0,t.jsx)("a",{href:`mailto:${H.organizer.email}`,className:"text-sm font-medium hover:underline",children:H.organizer.email||"Not provided"})]})]})]})}):(0,t.jsx)("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Failed to load contact information."}),(0,t.jsx)(eu.DialogFooter,{children:(0,t.jsx)(d.Button,{variant:"ghost",onClick:()=>Y(!1),className:"w-full",children:"Close"})})]})}),(0,t.jsx)(o.Footer,{})]}):null}e.s(["default",()=>em],62348)}]);