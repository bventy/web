(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55566,e=>{"use strict";var r=e.i(43476),s=e.i(53145),l=e.i(94814),a=e.i(62201);e.i(16233);var o=e.i(50610),i=e.i(91214),t=e.i(6556),n=e.i(19696),c=e.i(64939),m=e.i(71645);e.i(41644);var d=e.i(27301),u=e.i(22832),h=e.i(27421),x=e.i(18566),j=e.i(31278),p=e.i(64973),g=e.i(20341),F=e.i(78598),b=e.i(27100);let f=a.object({full_name:a.string().min(2,{message:"Full name must be at least 2 characters."}),email:a.string().email({message:"Please enter a valid email address."}),password:a.string().min(6,{message:"Password must be at least 6 characters."}),business_name:a.string().min(2,{message:"Business name must be at least 2 characters."}),category:a.string().min(1,{message:"Please select a category."}),city:a.string().min(2,{message:"City must be at least 2 characters."}),bio:a.string().min(10,{message:"Bio must be at least 10 characters."}),whatsapp_link:a.string().url({message:"Please enter a valid URL."}),portfolio_image_url:a.string().optional()});function y(){(0,x.useRouter)();let{login:e}=(0,g.useAuth)(),[a,y]=(0,m.useState)(!1),[v,_]=(0,m.useState)(null),[w,S]=(0,m.useState)(null),I=(0,s.useForm)({resolver:(0,l.zodResolver)(f),defaultValues:{full_name:"",email:"",password:"",business_name:"",category:"",city:"",bio:"",whatsapp_link:"",portfolio_image_url:""}});async function C(r){y(!0),_(null);try{let s=await d.authService.signup({full_name:r.full_name,email:r.email,password:r.password});await e(s.token,!1);let l=r.portfolio_image_url;if(w)try{l=await b.mediaService.uploadMedia(w);try{await h.userService.updateProfile({profile_image_url:l}),await e(s.token,!1)}catch(e){console.error("Sync failed",e)}}catch(e){console.error("Failed to upload portfolio image",e)}await u.vendorService.createProfile({business_name:r.business_name,category:r.category,city:r.city,bio:r.bio,whatsapp_link:r.whatsapp_link,portfolio_image_url:l}),await e(s.token,!0)}catch(e){console.error("Vendor signup error:",e),e.response&&e.response.data&&e.response.data.message?_(e.response.data.message):_("Failed to create vendor account. Please try again.")}finally{y(!1)}}return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(i.Form,{...I,children:(0,r.jsxs)("form",{onSubmit:I.handleSubmit(C),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Personal Details"}),(0,r.jsx)(i.FormField,{control:I.control,name:"full_name",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Full Name"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(t.Input,{placeholder:"John Doe",...e})}),(0,r.jsx)(i.FormMessage,{})]})}),(0,r.jsx)(i.FormField,{control:I.control,name:"email",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Email"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(t.Input,{placeholder:"name@example.com",...e})}),(0,r.jsx)(i.FormMessage,{})]})}),(0,r.jsx)(i.FormField,{control:I.control,name:"password",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Password"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(t.Input,{type:"password",placeholder:"******",...e})}),(0,r.jsx)(i.FormMessage,{})]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Business Details"}),(0,r.jsx)(i.FormField,{control:I.control,name:"business_name",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Business Name"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(t.Input,{placeholder:"e.g. Beats by Dre",...e})}),(0,r.jsx)(i.FormMessage,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(i.FormField,{control:I.control,name:"category",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Category"}),(0,r.jsxs)(c.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(c.SelectTrigger,{children:(0,r.jsx)(c.SelectValue,{placeholder:"Select"})})}),(0,r.jsxs)(c.SelectContent,{children:[(0,r.jsx)(c.SelectItem,{value:"DJ",children:"DJ"}),(0,r.jsx)(c.SelectItem,{value:"Decor",children:"Decor"}),(0,r.jsx)(c.SelectItem,{value:"Venue",children:"Venue"}),(0,r.jsx)(c.SelectItem,{value:"Catering",children:"Catering"}),(0,r.jsx)(c.SelectItem,{value:"Photography",children:"Photography"})]})]}),(0,r.jsx)(i.FormMessage,{})]})}),(0,r.jsx)(i.FormField,{control:I.control,name:"city",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"City"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(t.Input,{placeholder:"e.g. Mumbai",...e})}),(0,r.jsx)(i.FormMessage,{})]})})]}),(0,r.jsx)(i.FormField,{control:I.control,name:"whatsapp_link",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"WhatsApp Link"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(t.Input,{placeholder:"https://wa.me/91...",...e})}),(0,r.jsx)(i.FormMessage,{})]})}),(0,r.jsx)(i.FormField,{control:I.control,name:"portfolio_image_url",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Portfolio Image"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(F.FileUpload,{onFileSelect:e=>S(e),defaultUrl:e.value,label:"Upload Portfolio Image"})}),(0,r.jsx)(i.FormMessage,{})]})})]})]}),(0,r.jsx)(i.FormField,{control:I.control,name:"bio",render:({field:e})=>(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormLabel,{children:"Short Bio"}),(0,r.jsx)(i.FormControl,{children:(0,r.jsx)(n.Textarea,{placeholder:"Tell us about your services...",className:"resize-none h-[60px]",...e})}),(0,r.jsx)(i.FormMessage,{})]})}),v&&(0,r.jsx)(p.Alert,{variant:"destructive",children:(0,r.jsx)(p.AlertDescription,{children:v})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(o.Button,{type:"submit",className:"min-w-[200px]",disabled:a,children:[a&&(0,r.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Vendor Account"]})})]})})})}e.s(["VendorSignupForm",()=>y])}]);