{"version":3,"sources":["../../../../../../apps/admin/src/app/admin/vendors/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { adminService  } from \"@bventy/services\";\nimport { VendorProfile  } from \"@bventy/services\";\nimport { Button  } from \"@bventy/ui\";\nimport { Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n } from \"@bventy/ui\";\nimport { Avatar, AvatarFallback, AvatarImage  } from \"@bventy/ui\";\nimport { Check, X, Loader2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\nexport default function AdminVendorsPage() {\n    const [pendingVendors, setPendingVendors] = useState<VendorProfile[]>([]);\n    const [verifiedVendors, setVerifiedVendors] = useState<VendorProfile[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    const fetchVendors = async () => {\n        try {\n            const [pending, verified] = await Promise.all([\n                adminService.getVendors(\"pending\"),\n                adminService.getVendors(\"verified\"),\n            ]);\n            setPendingVendors(pending);\n            setVerifiedVendors(verified);\n        } catch (error) {\n            console.error(\"Failed to fetch vendors\", error);\n            toast.error(\"Failed to fetch vendors\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchVendors();\n    }, []);\n\n    const handleApprove = async (id: string) => {\n        try {\n            await adminService.approveVendor(id);\n            toast.success(\"Vendor approved successfully\");\n            setPendingVendors((prev) => prev.filter((v) => v.id !== id));\n            // Optionally move to verified list immediately, but fetching again or manual move ensures consistency\n            // For better UX, let's manually move it to verified list if we have the object\n            const approvedVendor = pendingVendors.find(v => v.id === id);\n            if (approvedVendor) {\n                setVerifiedVendors(prev => [...prev, { ...approvedVendor, status: 'verified' }]);\n            }\n        } catch (error) {\n            console.error(\"Failed to approve vendor\", error);\n            toast.error(\"Failed to approve vendor\");\n        }\n    };\n\n    const handleReject = async (id: string) => {\n        try {\n            await adminService.rejectVendor(id);\n            toast.success(\"Vendor rejected\");\n            setPendingVendors((prev) => prev.filter((v) => v.id !== id));\n        } catch (error) {\n            console.error(\"Failed to reject vendor\", error);\n            toast.error(\"Failed to reject vendor\");\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex h-full w-full items-center justify-center\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"flex flex-col gap-8\">\n            <div className=\"flex flex-col gap-4\">\n                <h1 className=\"text-3xl font-bold tracking-tight\">Pending Vendors</h1>\n                <div className=\"rounded-md border bg-white\">\n                    <Table>\n                        <TableHeader>\n                            <TableRow>\n                                <TableHead className=\"w-[100px]\">Image</TableHead>\n                                <TableHead>Business Name</TableHead>\n                                <TableHead>City</TableHead>\n                                <TableHead>Category</TableHead>\n                                <TableHead className=\"text-right\">Actions</TableHead>\n                            </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                            {pendingVendors.length === 0 ? (\n                                <TableRow>\n                                    <TableCell colSpan={5} className=\"h-24 text-center\">\n                                        No pending vendors.\n                                    </TableCell>\n                                </TableRow>\n                            ) : (\n                                pendingVendors.map((vendor) => (\n                                    <TableRow key={vendor.id}>\n                                        <TableCell>\n                                            <Avatar>\n                                                <AvatarImage\n                                                    src={vendor.primary_profile_image_url}\n                                                    alt={vendor.business_name}\n                                                />\n                                                <AvatarFallback>\n                                                    {vendor.business_name?.charAt(0) || \"?\"}\n                                                </AvatarFallback>\n                                            </Avatar>\n                                        </TableCell>\n                                        <TableCell className=\"font-medium\">\n                                            {vendor.business_name}\n                                        </TableCell>\n                                        <TableCell>{vendor.city}</TableCell>\n                                        <TableCell className=\"capitalize\">\n                                            {vendor.category}\n                                        </TableCell>\n                                        <TableCell className=\"text-right\">\n                                            <div className=\"flex justify-end gap-2\">\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant=\"outline\"\n                                                    className=\"text-green-600 hover:text-green-700 hover:bg-green-50\"\n                                                    onClick={() => handleApprove(vendor.id)}\n                                                >\n                                                    <Check className=\"h-4 w-4\" />\n                                                    <span className=\"sr-only\">Approve</span>\n                                                </Button>\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant=\"outline\"\n                                                    className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                                                    onClick={() => handleReject(vendor.id)}\n                                                >\n                                                    <X className=\"h-4 w-4\" />\n                                                    <span className=\"sr-only\">Reject</span>\n                                                </Button>\n                                            </div>\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                            )}\n                        </TableBody>\n                    </Table>\n                </div>\n            </div>\n\n            <div className=\"flex flex-col gap-4\">\n                <h1 className=\"text-3xl font-bold tracking-tight\">Verified Vendors</h1>\n                <div className=\"rounded-md border bg-white\">\n                    <Table>\n                        <TableHeader>\n                            <TableRow>\n                                <TableHead className=\"w-[100px]\">Image</TableHead>\n                                <TableHead>Business Name</TableHead>\n                                <TableHead>City</TableHead>\n                                <TableHead>Category</TableHead>\n                                <TableHead className=\"text-right\">Status</TableHead>\n                            </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                            {verifiedVendors.length === 0 ? (\n                                <TableRow>\n                                    <TableCell colSpan={5} className=\"h-24 text-center\">\n                                        No verified vendors found.\n                                    </TableCell>\n                                </TableRow>\n                            ) : (\n                                verifiedVendors.map((vendor) => (\n                                    <TableRow key={vendor.id}>\n                                        <TableCell>\n                                            <Avatar>\n                                                <AvatarImage\n                                                    src={vendor.primary_profile_image_url}\n                                                    alt={vendor.business_name}\n                                                />\n                                                <AvatarFallback>\n                                                    {vendor.business_name?.charAt(0) || \"?\"}\n                                                </AvatarFallback>\n                                            </Avatar>\n                                        </TableCell>\n                                        <TableCell className=\"font-medium\">\n                                            {vendor.business_name}\n                                        </TableCell>\n                                        <TableCell>{vendor.city}</TableCell>\n                                        <TableCell className=\"capitalize\">\n                                            {vendor.category}\n                                        </TableCell>\n                                        <TableCell className=\"text-right\">\n                                            <span className=\"inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20\">\n                                                Verified\n                                            </span>\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                            )}\n                        </TableBody>\n                    </Table>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}