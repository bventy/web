(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30432,e=>{"use strict";var l=e.i(43476),a=e.i(71645);e.i(41644);var s=e.i(55694),r=e.i(20341);e.i(16233);var t=e.i(64526),i=e.i(73030),c=e.i(64939),n=e.i(31278),d=e.i(46696),o=e.i(35131);function u(){let{user:e}=(0,r.useAuth)(),[u,x]=(0,a.useState)([]),[h,m]=(0,a.useState)(!0),j=async()=>{try{let e=await s.adminService.getUsers();x(e)}catch(e){console.error("Failed to fetch users",e),d.toast.error("Failed to fetch users")}finally{m(!1)}};(0,a.useEffect)(()=>{j()},[]);let f=async(e,l)=>{try{await s.adminService.updateUserRole(e,l),d.toast.success("User role updated"),x(a=>a.map(a=>a.id===e?{...a,role:l}:a))}catch(e){console.error("Failed to update role",e),d.toast.error("Failed to update user role")}};if(h)return(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,l.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});let p=e?.role==="super_admin";return(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Users"}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(t.Table,{children:[(0,l.jsx)(t.TableHeader,{children:(0,l.jsxs)(t.TableRow,{children:[(0,l.jsx)(t.TableHead,{className:"w-[100px]",children:"Avatar"}),(0,l.jsx)(t.TableHead,{children:"Start Info"}),(0,l.jsx)(t.TableHead,{children:"Email"}),(0,l.jsx)(t.TableHead,{children:"Current Role"}),(0,l.jsx)(t.TableHead,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(t.TableBody,{children:u.map(e=>(0,l.jsxs)(t.TableRow,{children:[(0,l.jsx)(t.TableCell,{children:(0,l.jsxs)(i.Avatar,{children:[(0,l.jsx)(i.AvatarImage,{src:e.profile_image_url,alt:e.username||e.full_name}),(0,l.jsx)(i.AvatarFallback,{children:(e.full_name||e.username||"U").charAt(0).toUpperCase()})]})}),(0,l.jsx)(t.TableCell,{children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-medium",children:e.full_name||"N/A"}),(0,l.jsxs)("span",{className:"text-xs text-muted-foreground",children:["@",e.username]})]})}),(0,l.jsx)(t.TableCell,{children:e.email}),(0,l.jsx)(t.TableCell,{children:(0,l.jsx)(o.Badge,{variant:"outline",className:"capitalize",children:e.role})}),(0,l.jsx)(t.TableCell,{className:"text-right",children:p?(0,l.jsxs)(c.Select,{value:e.role,onValueChange:l=>f(e.id,l),children:[(0,l.jsx)(c.SelectTrigger,{className:"w-[130px] ml-auto",children:(0,l.jsx)(c.SelectValue,{placeholder:"Select role"})}),(0,l.jsxs)(c.SelectContent,{children:[(0,l.jsx)(c.SelectItem,{value:"user",children:"User"}),(0,l.jsx)(c.SelectItem,{value:"staff",children:"Staff"}),(0,l.jsx)(c.SelectItem,{value:"admin",children:"Admin"}),(0,l.jsx)(c.SelectItem,{value:"super_admin",children:"Super Admin"})]})]}):(0,l.jsx)("span",{className:"text-sm text-muted-foreground italic",children:"View Only"})})]},e.id))})]})})]})}e.s(["default",()=>u])}]);